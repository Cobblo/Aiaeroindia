{% extends "base.html" %}
{% load static %}

{% block title %}Set New Password â€“ Ai-Aero{% endblock %}

{% block content %}
<style>
  .auth-wrap{padding-top:110px;padding-bottom:50px;}
</style>

<div class="auth-wrap">
  <div class="container" style="max-width:420px;">
    <div class="card shadow-sm border-0">
      <div class="card-body p-4">
        {% if validlink %}
          <h1 class="h4 mb-3 text-center">Enter new password</h1>
          <p class="text-muted text-center mb-4">
            Please enter your new password twice so we can verify you typed it correctly.
          </p>

          <form method="post">
            {% csrf_token %}
            {{ form.non_field_errors }}

            <!-- New password -->
            <div class="mb-3">
              <label for="id_new_password1" class="form-label">New password</label>
              <!-- We render our own inputs so we can add Bootstrap classes without extra libs -->
              <input type="password"
                     name="new_password1"
                     id="id_new_password1"
                     class="form-control"
                     autocomplete="new-password"
                     required>
              {% if form.new_password1.errors %}
                <div class="invalid-feedback d-block">{{ form.new_password1.errors.0 }}</div>
              {% endif %}
              {% if form.new_password1.help_text %}
                <div class="form-text">{{ form.new_password1.help_text|safe }}</div>
              {% endif %}
            </div>

            <!-- Confirm password -->
            <div class="mb-3">
              <label for="id_new_password2" class="form-label">Confirm password</label>
              <input type="password"
                     name="new_password2"
                     id="id_new_password2"
                     class="form-control"
                     autocomplete="new-password"
                     required>
              {% if form.new_password2.errors %}
                <div class="invalid-feedback d-block">{{ form.new_password2.errors.0 }}</div>
              {% endif %}
            </div>

            <button type="submit"
                    class="btn w-100"
                    style="background:#002244;color:#fff;">
              Change my password
            </button>
          </form>
        {% else %}
          <h1 class="h4 mb-3 text-center">Invalid link</h1>
          <p class="text-muted text-center">
            This password reset link is invalid or has already been used.
          </p>
          <div class="text-center mt-3">
            <a class="btn btn-outline-secondary" href="{% url 'password_reset' %}">Request a new link</a>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
